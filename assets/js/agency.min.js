!(function (e) {
  "use strict";

  // Smooth scroll for anchor links (remains the same)
  e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
    if (
      location.pathname.replace(/^\//, "") ==
        this.pathname.replace(/^\//, "") &&
      location.hostname == this.hostname
    ) {
      var a = e(this.hash);
      if ((a = a.length ? a : e("[name=" + this.hash.slice(1) + "]")).length)
        return (
          e("html, body").animate(
            { scrollTop: a.offset().top - 54 },
            1e3,
            "easeInOutExpo"
          ),
          !1
        );
    }
  });

  // Closes responsive menu when a scroll trigger link is clicked (remains the same)
  e(".js-scroll-trigger").click(function () {
    e(".navbar-collapse").collapse("hide");
  });

  // Activate scrollspy to add active class to navbar items on scroll (remains the same)
  e("body").scrollspy({ target: "#mainNav", offset: 56 });

  // --- NEW: IntersectionObserver for Navbar Shrink ---
  var sentinel = document.querySelector("#navbar-sentinel");
  var mainNav = document.querySelector("#mainNav");

  var observer = new IntersectionObserver(
    function (entries) {
      if (entries[0].isIntersecting) {
        mainNav.classList.remove("navbar-shrink");
      } else {
        mainNav.classList.add("navbar-shrink");
      }
    },
    { threshold: [0] }
  );

  if (sentinel) {
    observer.observe(sentinel);
  }
})(jQuery);
